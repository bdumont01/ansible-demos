---
- name: Gather EC2 facts
  hosts: "{{ ec2_hosts }}"
  gather_facts: false

  vars:
    ec2_region: us-west-1
    ec2_hosts: tag_Name_ctjon

  tasks:
  - name: Gather EC2 facts
    ec2_facts:

- name: Terminate EC2 hosts
  hosts: localhost
  gather_facts: false
  connection: local

  vars:
    ec2_hosts: tag_Name_ctjon
    ec2_region: us-west-1

  tasks:
  - name: Terminate EC2 hosts
    ec2:
      region: "{{ ec2_region }}"
      instance_tags:
        Name: ctjon
      state: absent
      wait: True
